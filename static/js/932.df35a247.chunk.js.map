{"version":3,"file":"static/js/932.df35a247.chunk.js","mappings":"uKACA,QAAuB,0BAAvB,EAA6D,+BAA7D,EAAmG,0BAAnG,EAAuI,6BAAvI,EAAkL,iC,qDCiBlL,MA+DA,EA/DoBA,KAClB,MAAMC,GAAYC,EAAAA,EAAAA,IAAYC,EAAAA,KAEvBC,EAAeC,IAAoBC,EAAAA,EAAAA,UAAmB,KACtDC,EAAgBC,IAAqBF,EAAAA,EAAAA,UAAmB,IAGzDG,GAAcP,EAAAA,EAAAA,IAAYQ,EAAAA,IAE1BC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,KACR,IACEF,GAASG,EAAAA,EAAAA,KAAW,IACpBH,GAASI,EAAAA,EAAAA,IAAS,OAElB,MAAMC,GAAcC,EAAAA,EAAAA,KAAQC,EAAAA,EAAAA,IAAIC,EAAAA,KAAMC,IACpC,MAAMC,EAAOD,EAASE,MAElBD,IACFV,GAASY,EAAAA,EAAAA,IAAWF,IACpBhB,EAAiBgB,GACjBb,EAAkBa,EAAKG,MAAM,EAhBd,IAiBjB,IAEF,MAAO,IAAMR,GACf,CAAE,MAAOS,GACPd,GAASG,EAAAA,EAAAA,KAAW,IACpBH,GAASI,EAAAA,EAAAA,IAASU,GACpB,IACC,CAACd,IAYJ,OACEe,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAASC,SAAA,EACvBH,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAcC,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,OAAKH,UAAWC,EAASC,SACR,OAAdtB,QAAc,IAAdA,OAAc,EAAdA,EAAgBwB,KAAKC,IACpBF,EAAAA,EAAAA,KAACG,EAAAA,EAAW,CAAkBD,MAAOA,GAAnBA,EAAME,UAG3B9B,EAAc+B,OAAS5B,EAAe4B,SACrCL,EAAAA,EAAAA,KAAA,OAAKH,UAAWC,EAAYC,UAC1BC,EAAAA,EAAAA,KAAA,UAAQM,QApBKC,KACrB1B,GAAS2B,EAAAA,EAAAA,OACT,MAAMC,EAAW9B,EAAc,EACzB+B,EA7Be,EA6BFD,EACbE,EAAWD,EA9BI,EA+BfE,EAAoBtC,EAAcoB,MAAMgB,EAAYC,GAC1DjC,EAAkB,IAAID,KAAmBmC,KACzCC,EAAAA,EAAAA,IAAeJ,EAAS,EAaiBZ,UAAWC,EAAgBC,SAAC,mBAMlE5B,IAAcM,IAAkBuB,EAAAA,EAAAA,KAACc,EAAAA,EAAM,MACpC,EClEV,EARoBC,KAEhBf,EAAAA,EAAAA,KAAAgB,EAAAA,SAAA,CAAAjB,UACEC,EAAAA,EAAAA,KAAC9B,EAAW,K","sources":["webpack://my-app/./src/components/NanniesList/NanniesList.module.css?c357","components/NanniesList/NanniesList.tsx","pages/NanniesPage/NanniesPage.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"back\":\"NanniesList_back__a4sqB\",\"container\":\"NanniesList_container__JHB-F\",\"list\":\"NanniesList_list__7+9b4\",\"btnWrap\":\"NanniesList_btnWrap__tzMPk\",\"btnLoadMore\":\"NanniesList_btnLoadMore__vYiJW\"};","import React, { useEffect, useState } from \"react\";\nimport NanniesCard from \"../NanniesCard/NanniesCard\";\nimport { ref, onValue } from \"firebase/database\";\nimport { db } from \"../../firebase\";\nimport { INanny } from \"../../types\";\nimport css from \"./NanniesList.module.css\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { selectCurrentPage, selectIsLoading } from \"../../redux/selectors\";\nimport {\n  setCurrentPage,\n  setError,\n  setLoading,\n  setNannies,\n  setNextPage,\n} from \"../../redux/nanniesSlice\";\nimport Loader from \"../Loader/Loader\";\n\nconst NanniesList = () => {\n  const isLoading = useSelector(selectIsLoading);\n\n  const [loadedNannies, setLoadedNannies] = useState<INanny[]>([]);\n  const [visibleNannies, setVisibleNannies] = useState<INanny[]>([]);\n\n  const nanniesPerPage = 3;\n  const currentPage = useSelector(selectCurrentPage);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    try {\n      dispatch(setLoading(true));\n      dispatch(setError(null));\n\n      const unsubscribe = onValue(ref(db), (snapshot) => {\n        const data = snapshot.val();\n\n        if (data) {\n          dispatch(setNannies(data));\n          setLoadedNannies(data);\n          setVisibleNannies(data.slice(0, nanniesPerPage));\n        }\n      });\n      return () => unsubscribe();\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setError(error));\n    }\n  }, [dispatch]);\n\n  const handleLoadMore = () => {\n    dispatch(setNextPage());\n    const nextPage = currentPage + 1;\n    const startIndex = nextPage * nanniesPerPage;\n    const endIndex = startIndex + nanniesPerPage;\n    const newVisibleNannies = loadedNannies.slice(startIndex, endIndex);\n    setVisibleNannies([...visibleNannies, ...newVisibleNannies]);\n    setCurrentPage(nextPage);\n  };\n\n  return (\n    <div className={css.back}>\n      <div className={css.container}>\n        <div className={css.list}>\n          {visibleNannies?.map((nanny: INanny) => (\n            <NanniesCard key={nanny.name} nanny={nanny} />\n          ))}\n        </div>\n        {loadedNannies.length > visibleNannies.length && (\n          <div className={css.btnWrap}>\n            <button onClick={handleLoadMore} className={css.btnLoadMore}>\n              Load more\n            </button>\n          </div>\n        )}\n      </div>\n      {isLoading && !visibleNannies && <Loader />}\n    </div>\n  );\n};\n\nexport default NanniesList;\n","import React from \"react\";\nimport NanniesList from \"../../components/NanniesList/NanniesList\";\n\nconst NanniesPage = () => {\n  return (\n    <>\n      <NanniesList />\n    </>\n  );\n};\n\nexport default NanniesPage;\n"],"names":["NanniesList","isLoading","useSelector","selectIsLoading","loadedNannies","setLoadedNannies","useState","visibleNannies","setVisibleNannies","currentPage","selectCurrentPage","dispatch","useDispatch","useEffect","setLoading","setError","unsubscribe","onValue","ref","db","snapshot","data","val","setNannies","slice","error","_jsxs","className","css","children","_jsx","map","nanny","NanniesCard","name","length","onClick","handleLoadMore","setNextPage","nextPage","startIndex","endIndex","newVisibleNannies","setCurrentPage","Loader","NanniesPage","_Fragment"],"sourceRoot":""}